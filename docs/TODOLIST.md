# TODOLIST

## 待办事项

- [ ] 优化数据库读取逻辑，修改底层结构
- [x] 日志文件记录（方便调试）
- [x] 赞助列表
- [x] 增加首次启动本地数据库配置引导过程
- [x] 增加首次启动App设置配置引导过程

## 已知bug

- [x] 打开app加载速度过慢（更新检测原因需要优化）
- [🔴] **数据库加载失败** - 无法正确通过已配置的路径加载xplane、lnm数据库，导致整个app不能正常使用
  - **根本原因**: PersistenceService 和 SharedPreferences 数据不同步
  - **影响**: 机场数据无法加载，地图和详情页面显示空白
  - **修复计划**: 参见 [DATABASE_ANALYSIS_SUMMARY.md](./DATABASE_ANALYSIS_SUMMARY.md)
  - **优先级**: Critical - 需要立即修复
- [ ] 修复机型识别错误问题 (例如：Toliss A320识别成A319) 思路：直接读取xplane的flight_log文件

## prompts

请你深度分析当前代码仓库所有有关本地数据库读取以及加载、调用的方法。
我的最新要求如下：

1. 重写整个加载读取、调用流程，以实现api高度集中化、统一管理化
2. 解构代码，根据业务逻辑拆分成独立组件，以方便后期维护
3. 优化数据库加载速度：全局统一通过一个接口调度导航信息获取
4. 数据库切换修复：当前存在数据库无法正常读取的问题。路径是正确的，但是不管是xplane还是littlenavmap都无法读到数据。

接下来开发的代码必须严格遵守组件化开发、减少代码冗余、提高代码可复用性、方便后期维护的原则。在我没有要求下，请不要私自生成总结文档。
